\documentclass[article]{standalone}               
\usepackage{tikz,pgfplots}
\pgfplotsset{compat=1.15}
\usepackage{adjustbox}
\definecolor{webgreen}{rgb}{0,.5,0}
\definecolor{webbrown}{rgb}{.6,0,0}
\definecolor{webyellow}{rgb}{0.98,0.92,0.73}
\definecolor{webgray}{rgb}{.753,.753,.753}
\definecolor{webblue}{rgb}{0,0,.8}
\definecolor{webgreen}{rgb}{0, 0.5, 0} % less intense green
\definecolor{webred}{rgb}{0.5, 0, 0}   % less intense red

\pgfplotscreateplotcyclelist{my color list}{%
	densely dashdotted, color=webblue, every mark/.append style={solid, fill=webblue}, mark=*\\%
	densely dashdotted, color=webred, every mark/.append style={solid, fill=webred},mark=diamond*\\%
	densely dotted, color=webblue, every mark/.append style={solid, fill=webblue}, mark=*\\%
	densely dotted, color=webred, every mark/.append style={solid, fill=webred}, mark=diamond*\\%
	dashed, color=webgreen, every mark/.append style={solid, fill=gray},mark=*\\%
	dashed, color=webgray,every mark/.append style={solid, fill=gray},mark=diamond*\\%
	dashdotted, every mark/.append style={solid, fill=gray},mark=otimes*\\%
%	dashdotdotted, every mark/.append style={solid},mark=star\\%
	solid, color=webred, every mark/.append style={solid, fill=webred}, mark=o\\%
	densely dashdotted, color=webgreen, every mark/.append style={solid, fill=webgreen},mark=diamond*\\%
}

%\begin{filecontents*}{SystemC-Gain_wait.csv}
%a,b,c,d,e,f,g,h,i,j,k
%1,0.047,0.25,0.192,0.25,0,0,910,1.0989,0.0430,23.2558
%2,0.081,0.38,0.286,0.38,0,0,925,1.0811,0.0385,25.9740
%5,0.106,0.71,0.599,0.71,0,0,996,1.0040,0.0204,49.0196
%10,0.155,1.12,0.958,1.12,0,1,857,1.1669,0.0151,66.2252
%20,0.34,2.27,1.925,2.27,0,0,912,1.0965,0.0168,59.5238
%50,0.587,5.35,4.757,5.33,0,0,931.2,1.0739,0.0117,85.7633
%100,1.216,11.76,10.542,11.76,0,1,1044.1,0.9578,0.0121,82.5083
%200,1.938,24.89,22.951,24.89,0,0,1142.5,0.8753,0.0097,103.4126
%500,6.158,79.59,78.725,79.56,0,3,1572.48,0.6359,0.0123,81.2480
%1000,10.893,196.79,185.9,196.75,0,2,1857.99,0.5382,0.0109,91.8358
%2000,21.07,508.31,487.229,508.09,0,3,2435.64,0.4106,0.0105,94.9397
%5000,51.637,1890.2,1838.53,1890.07,0,3,3676.858,0.2720,0.0103,96.8373
%10000,106.115,5377.76,5271.632,5377.27,0,20,5271.531,0.1897,0.0106,94.2409
%20000,215.538,12812.33,12596.78,12811.72,0,22,6298.3395,0.1588,0.0108,92.7928
%\end{filecontents*}

%
%\begin{filecontents*}{SystemC-Gain_next.csv}
%a,b,c,d,e,f,g,h,i,j,k
%1,0.06,0.21,0.147,0.22,0,0,610,1.6393,0.0560,17.8571
%2,0.08,0.29,0.288,0.29,0,1,1010,0.9901,0.0380,26.3158
%5,0.102,0.59,0.59,0.59,0,0,1008,0.9921,0.0196,51.0204
%10,0.14,1.11,0.969,1.12,0,0,883,1.1325,0.0136,73.5294
%20,0.2,1.63,1.419,1.62,0,0,666.5,1.5004,0.0098,102.0408
%50,0.464,4.36,3.892,4.35,0,0,761.2,1.3137,0.0092,108.6957
%100,1.204,9.52,8.308,9.52,0,1,822.2,1.2162,0.0120,83.3333
%200,2.618,20.94,18.313,20.71,0,3,911.35,1.0973,0.0131,76.5111
%500,4.833,55.28,50.437,55.25,0,2,1007.02,0.9930,0.0097,103.5411
%1000,10.407,121.38,110.964,121.34,0,4,1108.78,0.9019,0.0104,96.1261
%2000,17.874,277.4,259.543,277.39,0,2,1297.285,0.7708,0.0089,111.9194
%5000,42.41,868.71,826.291,868.68,0,2,1652.41,0.6052,0.0085,117.9078
%10000,85.666,3108.7,3023.03,3108.55,0,5,3022.944,0.3308,0.0086,116.7379
%20000,170.243,9464.05,8278.2,9292.8,0,16,4139.057,0.2416,0.0085,117.4819
%50000,435.077,29771.6,29336.51,29771,0,10,5867.2848,0.1704,0.0087,114.9232
%\end{filecontents*}
%
%\begin{filecontents*}{SystemC-Gain_next.csv}
%     a,       b,       c,       d,       e,  f,g,h,,,,,
%0,0.00442,0.104,0.124,0.10399,0,,,,,,,
%1,0.04482,0.161,0.219,0.15141,0,24.7525,17.5439,,,,,
%2,0.0636,0.228,0.302,0.11404,0,33.7952,16.1290,,,,,
%5,0.07044,0.394,0.483,0.07883,0,75.7346,17.2414,,,,,
%10,0.1262,0.762,0.908,0.07625,0,82.1153,15.1976,,,,,
%20,0.2016,1.387,1.5995,0.06935,0,101.4302,15.5885,,,,,
%50,0.3997,3.5459,4.1344,0.07092,2,126.4926,14.5269,,,,,
%100,0.7657,8.021,8.8181,0.08021,0,131.3577,12.6310,,,,,
%200,1.735,18.0833,19.8718,0.09042,7,115.5682,11.1239,,,,,
%500,4.0342,51.837,56.1878,0.10367,5,124.0763,9.6650,,,,,
%1000,7.9737,112.5634,120.8572,0.11256,6,125.4819,8.8921,,,,,
%1000,8.277,112.5634,120.8572,0.11256,6,120.8813,8.8921,,,,,
%2000,15.4546,257.892,274.2097,0.12895,6,129.4483,7.7583,,,,,
%5000,41.6427,859.5845,902.3334,0.17192,3,120.0818,5.8175,,,,,
%10000,82.5742,3187.5691,3270.1703,0.31876,26,121.1097,3.1373,,,,,
%20000,169.0561,9137.6914,9309.2548,0.45688,15,118.3070,2.1888,,,,,
%\end{filecontents*}

\begin{filecontents*}{SystemC-Gain_next.txt}
a,b,c,d,e,f,g,h,i,
1,0.04482,0.151,0.219,0.15141,0,24.7524752475247,21.2765957446809,10.526,,,,
2,0.0636,0.228,0.302,0.11404,0,33.7952010814464,16.1290322580645,11.236,,,,
5,0.07044,0.394,0.483,0.07883,0,75.7346258709482,17.2413793103448,13.928,,,,
10,0.1262,0.762,0.908,0.07625,0,82.1152898669732,15.1975683890578,12.755,,,,
20,0.2016,1.387,1.5995,0.06935,0,101.430165331169,15.5884645362432,13.555,,,,
50,0.3997,3.5459,4.1344,0.07092,2,126.492612831411,14.5268601644441,12.468,,,,
100,0.7657,8.021,8.8181,0.08021,0,131.357713324926,12.6310471138057,11.502,,,,
200,1.735,18.0833,19.8718,0.09042,7,115.568191011106,11.1239036002514,10.128,,,,
500,4.0342,51.837,56.1878,0.10367,5,124.076252301614,9.66501072816191,8.918,,,,
1000,7.9737,112.5634,120.8572,0.11256,6,125.481850305172,8.89209794823732,,8.283,,,
1000,8.277,112.5634,120.8572,0.11256,6,120.88127283145,8.89209794823732,8.283,,,,
2000,15.4546,257.892,274.2097,0.12895,6,129.448330051818,7.75831303241423,7.297,,,,
5000,41.6427,859.5845,902.3334,0.17192,3,120.081809335064,5.81746764469933,5.542,,,,
10000,82.5742,3187.5691,3270.1703,0.31876,26,121.109684439028,3.13728925220232,3.058,,,,
20000,169.0561,9137.6914,9309.2548,0.45688,15,118.307017120445,2.18876155428073,2.148,,,,
\end{filecontents*}

\begin{filecontents*}{SystemC-Gain_wait.txt}
a,b,c,d,e,f,g,h,i,j,k,
1,0.0498,0.1968,0.2772,0.1007,0,21.6450,9.9305,1.1436,1.7667,6.435,,
2,0.0743,0.3154,0.4017,0.10965,0,28.2885,9.1199,1.1947,1.7685,7.145,,
5,0.0906,0.5206,0.679,0.0849,0,57.4713,11.7786,1.3178,1.4638,8.973,,
10,0.1408,1.0365,1.188,0.09404,2,72.8863,10.6338,1.1266,1.4292,9.379,,
20,0.2305,1.8843,2.129,0.08941,2,88.1446,11.1844,1.1507,1.3938,9.964,,
50,0.5004,4.7978,5.3151,0.094034,2,100.6441,10.6345,1.2568,1.3660,9.628,,
100,1.2218,9.6346,10.8842,0.095385,1,82.0883,10.4838,1.6002,1.2048,9.291,,
200,1.8287,22.3028,24.1491,0.1110335,2,109.5830,9.0063,1.0546,1.2351,8.324,,
500,5.7412,71.9836,77.7419,0.143775,2,87.1445,6.9553,1.4238,1.3896,6.441,,
1000,10.4411,182.8046,194.568,0.1827085,4,95.8084,5.4732,1.3097,1.6247,5.143,,
2000,21.2152,488.9813,510.5398,0.2444426,7,94.2880,4.0909,1.2820,2.1736,3.918,,
5000,50.8188,1826.8925,1877.7988,0.36535928,6,98.3958,2.7370,1.3156,2.8346,2.663,,
10000,104.8337,5370.3296,5475.1904,0.53702335,5,95.3924,1.8621,1.2588,3.1241,1.826,,
20000,214.5691,12654.38,12869.77,0.632714195,70,93.2116,1.5805,1.2993,1.9850,1.554,,
30000,328.5568,19788.4629,20117.5702,0.659612226666667,30,91.3094,1.5160,1.2957,1.4437,1.491,,
\end{filecontents*}

\begin{filecontents*}{SystemC-Gain_wait.txt}
REPEAT,  Tsetup,  Tsimul,   Twall,   Tuser, Tsystem, MAPS,    fRAM,    rRAM, ContextSw,
    0, 0.00720,  0.0622,  0.0625,  0.0320, 0.03200,  16.066, 3069764,  228384,    0,
     1, 0.07280,  0.2492,  0.2496,  0.0000, 0.25000,   4.013, 3023376,  228404,    0,
     2, 0.06970,  0.2866,  0.2871,  0.0000, 0.28700,   6.979, 3000600,  228404,    0,
     5, 0.13188,  0.6015,  0.6024,  0.3020, 0.30200,   8.312, 3001180,  228404,    0,
   10, 0.15457,  1.0334,  1.0337,  0.5170, 0.51700,   9.677, 3072240,  228404,    0,
    20, 0.25429,  1.7090,  1.7093,  0.8540, 0.85400,  11.703, 3038208,  228404,    0
    50, 0.50072,  4.9120,  4.9125,  4.3160, 0.59600,  10.179, 3039268,  228404,    0,
   100, 1.07607, 11.1701, 11.1702, 11.1700, 0.00000,   8.953, 3047164,  228404,    0,
   200, 2.19698, 22.1802, 22.1648, 22.1660, 0.00000,   9.017, 3048452,  228404,    0,
   500, 5.57195, 73.5380, 73.5396, 69.6480, 3.89400,   6.799, 3045456,  228400,    0,
 1000, 9.71575,185.5665,185.5454,182.3040, 3.24200,   5.389, 3041528,  228400,    0,
  2000,20.66707,502.2968,502.2756,494.6430, 7.63600,   3.982, 3026148,  228400,    0,
  5000,52.89778,1899.9116,1899.8805,1887.9870,11.89600,   2.632, 2978940,  228400,    0,
 10000,105.57854,5427.8535,5427.8179,5380.0180,47.80200,   1.842, 2929672,  228408,    0,
 20000,216.55493,12773.5996,12773.3057,12681.3720,91.93600,   1.566, 2789748,  228404,    0,
 30000,326.63551,19948.9785,19948.4590,19820.6720,127.79000,   1.504, 2665824,  338480,    0,
\end{filecontents*}
\begin{document}
	
	%\begin{figure}
	\maxsizebox{\columnwidth}{!}
	{
\begin{tabular}{c}		
\begin{tikzpicture}
\begin{axis}
[
	title={The rooflines of performance gain of SystemC wait/next\_trigger},
width=\textwidth,
cycle list name={my color list},
legend style={
	cells={anchor=east},
	,legend style={at={(1,.85)}}%	legend pos={east},
},
xmin=1, xmax=100000,% x scale
ymin=1, ymax=150, % y scale
xlabel="No of actions/1000",
%/pgf/number format/1000 sep={},
ylabel=$Million~actions/s$,
xmode=log,
ymode=log,
log basis x=10,

]
\addplot table [x=a, y=g, col sep=comma] {SystemC-Gain_next.txt};
\addlegendentry{$next\_trigger$,elaboration}
\addplot table [x=a, y=g, col sep=comma] {SystemC-Gain_wait.txt};
\addlegendentry{$wait$,elaboration}
\addplot table [x=a, y=h, col sep=comma] {SystemC-Gain_next.txt};
\addlegendentry{$next\_trigger$,simulation}
\addplot table [x=a, y=h, col sep=comma] {SystemC-Gain_wait.txt};
\addlegendentry{$wait$,simulation}
\addplot table [x=a, y=i, col sep=comma] {SystemC-Gain_next.txt};
\addlegendentry{$next\_trigger$,total}
\addplot table [x=a, y=k, col sep=comma] {SystemC-Gain_wait.txt};
\addlegendentry{$wait$,total}

% Roofline of NextTrigger, elaboration
\draw[webblue] (1,30) -- (25,120);
\draw[webblue] (25,120) -- (20000,120);
%% Roofline of wait, elaboration
\draw[webred] (1,25) -- (20,95);
\draw[webred] (20,95) -- (50000,95);

%% Roofline of next_trigger, simulation
\draw[thick,webblue] (1,13) -- (500,13);
\draw[thick,webblue] (500,13) -- (20000,2.4);
%% Roofline of wait, simulation
\draw[webred] (1,10) -- (200,10);
\draw[webred] (200,10) -- (30000,1.3);


\end{axis}
\end{tikzpicture}
\cr
\begin{tikzpicture}
\begin{axis}
[
title={The context switches of SystemC wait/next\_trigger},
width=\textwidth,
cycle list name={my color list},
legend style={
	cells={anchor=east},
	,legend style={at={(0.5,.85)}}%	legend pos={east},
},
xmin=1, xmax=100000,% x scale
ymin=0, ymax=100, % y scale
xlabel="No of actions/1000",
%/pgf/number format/1000 sep={},
ylabel="Context switches",
xmode=log,
ymode=log,
log basis x=10,
]
\addplot table [x=a, y=f, col sep=comma] {SystemC-Gain_next.txt};
\addlegendentry{$next\_trigger$,simulation}
\addplot table [x=a, y=f, col sep=comma] {SystemC-Gain_wait.txt};
\addlegendentry{$wait$,simulation}

\end{axis}
\end{tikzpicture}
\end{tabular}
	}
	%	\caption{Dependence of "actions per seconds" as measured by the benchmark}
	%	\label{SupercomputerTOP10Prediction}
	
	%\end{figure}
	
\end{document}
